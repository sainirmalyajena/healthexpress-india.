import Link from 'next/link';

export function WhatsAppButton() {
    // Use env var or fallback (strip spaces/symbols for clean URL)
    const phoneNumber = (process.env.NEXT_PUBLIC_WHATSAPP || '919307861041').replace(/[^0-9]/g, '');
    const message = encodeURIComponent('Hi HealthExpress, I need help with a surgery.');
    const whatsappUrl = `https://wa.me/${phoneNumber}?text=${message}`;

    return (
        <Link
            href={whatsappUrl}
            target="_blank"
            rel="noopener noreferrer"
            className="fixed bottom-24 right-6 md:bottom-6 z-50 flex items-center justify-center w-14 h-14 bg-green-500 rounded-full shadow-lg hover:bg-green-600 transition-colors animate-bounce-subtle"
            aria-label="Chat on WhatsApp"
        >
            <svg
                viewBox="0 0 24 24"
                width="32"
                height="32"
                fill="white"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path d="M12.0117 2C6.50574 2 2.02344 6.47837 2.02344 11.9841C2.02344 13.7485 2.48297 15.4678 3.37032 17.009L2 22L7.12596 20.6559C8.61867 21.4672 10.3061 21.8973 12.0117 21.8973H12.0159C17.5218 21.8973 22.0041 17.4189 22.0041 11.913C22.0041 9.25621 20.9723 6.7728 19.0988 4.8993C17.2253 3.0258 14.7171 2 12.0117 2ZM12.0117 20.2195C10.4851 20.2195 9.00693 19.8058 7.71183 19.0346L7.40871 18.854L4.25206 19.6811L5.09341 16.6037L4.89139 16.2844C4.05355 14.9573 3.61204 13.435 3.61204 11.8797C3.61204 7.24769 7.37922 3.48052 12.0117 3.48052C14.2599 3.48052 16.3712 4.35706 17.9623 5.94819C19.5534 7.53932 20.4299 9.65063 20.4299 11.8988C20.4299 16.5309 16.6627 20.2195 12.0117 20.2195ZM17.4299 14.8804C17.1329 14.7317 15.672 14.0135 15.3995 13.9142C15.127 13.815 14.9288 13.8646 14.7306 14.1624C14.5323 14.4594 13.9623 15.1287 13.7889 15.327C13.6154 15.5252 13.4419 15.55 13.1448 15.4013C12.8478 15.2524 11.8896 14.9388 10.7516 13.9242C9.86422 13.1325 9.26514 12.155 8.96807 11.6591C8.671 11.1632 8.93661 10.8878 9.08518 10.74C9.21855 10.6074 9.38202 10.3941 9.53059 10.2206C9.67917 10.0471 9.72877 9.92316 9.82796 9.72477C9.92715 9.52638 9.87755 9.35286 9.80315 9.20405C9.72875 9.05525 9.13426 7.59247 8.88636 6.9967C8.63845 6.42555 8.39055 6.50058 8.19236 6.50058C8.01884 6.50058 7.82065 6.47513 7.62247 6.47513C7.42428 6.47513 7.10234 6.54955 6.82998 6.84662C6.55747 7.1437 5.78913 7.86221 5.78913 9.32788C5.78913 10.7925 6.85478 12.204 7.00335 12.4023C7.15191 12.6005 9.08331 15.5752 12.0315 16.848C12.7335 17.1517 13.2801 17.3331 13.7088 17.4691C14.5422 17.7336 15.2973 17.6957 15.8926 17.6067C16.5529 17.5079 17.9252 16.7753 18.2223 15.9324C18.5193 15.0895 18.5193 14.3713 18.4449 14.2474C18.3705 14.1235 18.1724 14.0535 17.8753 13.9048V14.8804H17.4299Z" />
            </svg>
        </Link>
    );
}
